<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Instructor Reports</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=light_mode" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=dark_mode" />
  <link rel="stylesheet" href="/static/theme.css" />
</head>
  <body class="instructor-theme">
  <h1>Course Statistics Report</h1>

  <div>
    <button onclick="window.location.href='/instructor/reports/export/csv'">Export CSV</button>
    <button onclick="window.location.href='/instructor/reports/export/pdf'">Export PDF</button>
  </div>

  <canvas id="courseChart" width="400" height="200"></canvas>

  <script>
    fetch("/instructor/reports/data")
      .then(res => res.json())
      .then(data => {
        const ctx = document.getElementById('courseChart').getContext('2d');
        new Chart(ctx, {
          type: 'bar',
          data: {
            labels: data.map(d => d.Title),
            datasets: [{
              label: "Students Enrolled",
              data: data.map(d => d.student_count),
              backgroundColor: "rgba(54, 162, 235, 0.7)"
            }]
          }
        });
      });
  </script>
</body>
</html>